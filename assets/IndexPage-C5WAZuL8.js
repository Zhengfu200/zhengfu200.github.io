import{p as K,h as c,q as yt,s as be,t as _t,a as z,c as d,w as O,v as xe,x as wt,y as Ot,z as oe,A as Nt,B as pe,C as qe,D as at,E as Fe,F as Mt,G as Rt,H as Te,T as kt,I as At,J as Ct,K as St,L as jt,M as xt,N as Pt,O as Ce,P as qt,R as Qt,S as Je,U as Ht,V as ve,W as $t,X as Wt,Y as Ee,Z as He,$ as ot,a0 as Se,a1 as Ze,a2 as $e,a3 as Yt,a4 as et,a5 as Xt,a6 as rt,a7 as Ft,a8 as st,a9 as Kt,aa as Gt,ab as tt,ac as Ne,ad as Jt,ae as Zt,af as en,ag as tn,ah as nn,ai as an,aj as ln,ak as on,al as rn,b as U,am as sn,_ as un,i as M,j as ue,k as x,an as dn,m as g,ao as cn,ap as Y,aq as ae,ar as Le,as as he,at as X,au as de,av as ut,aw as _e,ax as fn,ay as De,az as Ue,aA as dt,aB as mn,aC as le,aD as hn,aE as gn}from"./index-DZfvRQcu.js";const vn=K({name:"QSpace",setup(){const e=c("div",{class:"q-space"});return()=>e}}),bn=K({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:o}){const{proxy:{$q:u}}=oe(),n=yt(_t,be);if(n===be)return console.error("QHeader needs to be child of QLayout"),be;const a=z(parseInt(e.heightHint,10)),i=z(!0),v=d(()=>e.reveal===!0||n.view.value.indexOf("H")!==-1||u.platform.is.ios&&n.isContainer.value===!0),k=d(()=>{if(e.modelValue!==!0)return 0;if(v.value===!0)return i.value===!0?a.value:0;const r=a.value-n.scroll.value.position;return r>0?r:0}),_=d(()=>e.modelValue!==!0||v.value===!0&&i.value!==!0),s=d(()=>e.modelValue===!0&&_.value===!0&&e.reveal===!0),C=d(()=>"q-header q-layout__section--marginal "+(v.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(_.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),w=d(()=>{const r=n.rows.value.top,S={};return r[0]==="l"&&n.left.space===!0&&(S[u.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),r[2]==="r"&&n.right.space===!0&&(S[u.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),S});function m(r,S){n.update("header",r,S)}function l(r,S){r.value!==S&&(r.value=S)}function h({height:r}){l(a,r),m("size",r)}function q(r){s.value===!0&&l(i,!0),o("focusin",r)}O(()=>e.modelValue,r=>{m("space",r),l(i,!0),n.animate()}),O(k,r=>{m("offset",r)}),O(()=>e.reveal,r=>{r===!1&&l(i,e.modelValue)}),O(i,r=>{n.animate(),o("reveal",r)}),O(n.scroll,r=>{e.reveal===!0&&l(i,r.direction==="up"||r.position<=e.revealOffset||r.position-r.inflectionPoint<100)});const b={};return n.instances.header=b,e.modelValue===!0&&m("size",a.value),m("space",e.modelValue),m("offset",k.value),xe(()=>{n.instances.header===b&&(n.instances.header=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const r=wt(t.default,[]);return e.elevated===!0&&r.push(c("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),r.push(c(Ot,{debounce:0,onResize:h})),c("header",{class:C.value,style:w.value,onFocusin:q},r)}}}),pn=["top","middle","bottom"],We=K({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>pn.includes(e)}},setup(e,{slots:t}){const o=d(()=>e.align!==void 0?{verticalAlign:e.align}:null),u=d(()=>{const n=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(n!==void 0?` text-${n}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>c("div",{class:u.value,style:o.value,role:"status","aria-label":e.label},Nt(t.default,e.label!==void 0?[e.label]:[]))}}),Me=K({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const o=d(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>c("div",{class:o.value},pe(t.default))}}),ee=K({name:"QItem",props:{...qe,...at,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:o}){const{proxy:{$q:u}}=oe(),n=Fe(e,u),{hasLink:a,linkAttrs:i,linkClass:v,linkTag:k,navigateOnClick:_}=Mt(),s=z(null),C=z(null),w=d(()=>e.clickable===!0||a.value===!0||e.tag==="label"),m=d(()=>e.disable!==!0&&w.value===!0),l=d(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(n.value===!0?" q-item--dark":"")+(a.value===!0&&e.active===null?v.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(m.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),h=d(()=>e.insetLevel===void 0?null:{["padding"+(u.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function q(S){m.value===!0&&(C.value!==null&&(S.qKeyEvent!==!0&&document.activeElement===s.value?C.value.focus():document.activeElement===C.value&&s.value.focus()),_(S))}function b(S){if(m.value===!0&&Rt(S,[13,32])===!0){Te(S),S.qKeyEvent=!0;const j=new MouseEvent("click",S);j.qKeyEvent=!0,s.value.dispatchEvent(j)}o("keyup",S)}function r(){const S=wt(t.default,[]);return m.value===!0&&S.unshift(c("div",{class:"q-focus-helper",tabindex:-1,ref:C})),S}return()=>{const S={ref:s,class:l.value,style:h.value,role:"listitem",onClick:q,onKeyup:b};return m.value===!0?(S.tabindex=e.tabindex||"0",Object.assign(S,i.value)):w.value===!0&&(S["aria-disabled"]="true"),c(k.value,S,r())}}}),yn=["ul","ol"],Ye=K({name:"QList",props:{...qe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const o=oe(),u=Fe(e,o.proxy.$q),n=d(()=>yn.includes(e.tag)?null:"list"),a=d(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(u.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>c(e.tag,{class:a.value,role:n.value},pe(t.default))}}),ct=K({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const o=d(()=>parseInt(e.lines,10)),u=d(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(o.value===1?" ellipsis":"")),n=d(()=>e.lines!==void 0&&o.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o.value}:null);return()=>c("div",{style:n.value,class:u.value},pe(t.default))}}),Tt=K({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:o}){let u=!1,n,a,i=null,v=null,k,_;function s(){n&&n(),n=null,u=!1,i!==null&&(clearTimeout(i),i=null),v!==null&&(clearTimeout(v),v=null),a!==void 0&&a.removeEventListener("transitionend",k),k=null}function C(h,q,b){q!==void 0&&(h.style.height=`${q}px`),h.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,u=!0,n=b}function w(h,q){h.style.overflowY=null,h.style.height=null,h.style.transition=null,s(),q!==_&&o(q)}function m(h,q){let b=0;a=h,u===!0?(s(),b=h.offsetHeight===h.scrollHeight?0:void 0):(_="hide",h.style.overflowY="hidden"),C(h,b,q),i=setTimeout(()=>{i=null,h.style.height=`${h.scrollHeight}px`,k=r=>{v=null,(Object(r)!==r||r.target===h)&&w(h,"show")},h.addEventListener("transitionend",k),v=setTimeout(k,e.duration*1.1)},100)}function l(h,q){let b;a=h,u===!0?s():(_="show",h.style.overflowY="hidden",b=h.scrollHeight),C(h,b,q),i=setTimeout(()=>{i=null,h.style.height=0,k=r=>{v=null,(Object(r)!==r||r.target===h)&&w(h,"hide")},h.addEventListener("transitionend",k),v=setTimeout(k,e.duration*1.1)},100)}return xe(()=>{u===!0&&s()}),()=>c(kt,{css:!1,appear:e.appear,onEnter:m,onLeave:l},t.default)}}),fe=At({}),_n=Object.keys(at),ft=K({name:"QExpansionItem",props:{...at,...Ct,...qe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...St,"click","afterShow","afterHide"],setup(e,{slots:t,emit:o}){const{proxy:{$q:u}}=oe(),n=Fe(e,u),a=z(e.modelValue!==null?e.modelValue:e.defaultOpened),i=z(null),v=jt(),{show:k,hide:_,toggle:s}=xt({showing:a});let C,w;const m=d(()=>`q-expansion-item q-item-type q-expansion-item--${a.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),l=d(()=>e.contentInsetLevel===void 0?null:{["padding"+(u.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),h=d(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),q=d(()=>{const F={};return _n.forEach(W=>{F[W]=e[W]}),F}),b=d(()=>h.value===!0||e.expandIconToggle!==!0),r=d(()=>e.expandedIcon!==void 0&&a.value===!0?e.expandedIcon:e.expandIcon||u.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),S=d(()=>e.disable!==!0&&(h.value===!0||e.expandIconToggle===!0)),j=d(()=>({expanded:a.value===!0,detailsId:v.value,toggle:s,show:k,hide:_})),A=d(()=>{const F=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:u.lang.label[a.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":a.value===!0?"true":"false","aria-controls":v.value,"aria-label":F}});O(()=>e.group,F=>{w!==void 0&&w(),F!==void 0&&R()});function T(F){h.value!==!0&&s(F),o("click",F)}function E(F){F.keyCode===13&&P(F,!0)}function P(F,W){W!==!0&&i.value!==null&&i.value.focus(),s(F),Te(F)}function B(){o("afterShow")}function V(){o("afterHide")}function R(){C===void 0&&(C=Pt()),a.value===!0&&(fe[e.group]=C);const F=O(a,G=>{G===!0?fe[e.group]=C:fe[e.group]===C&&delete fe[e.group]}),W=O(()=>fe[e.group],(G,me)=>{me===C&&G!==void 0&&G!==C&&_()});w=()=>{F(),W(),fe[e.group]===C&&delete fe[e.group],w=void 0}}function y(){const F={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},W=[c(Je,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&a.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:r.value})];return S.value===!0&&(Object.assign(F,{tabindex:0,...A.value,onClick:P,onKeyup:E}),W.unshift(c("div",{ref:i,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),c(Me,F,()=>W)}function N(){let F;return t.header!==void 0?F=[].concat(t.header(j.value)):(F=[c(Me,()=>[c(ct,{lines:e.labelLines},()=>e.label||""),e.caption?c(ct,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&F[e.switchToggleSide===!0?"push":"unshift"](c(Me,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>c(Je,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&F[e.switchToggleSide===!0?"unshift":"push"](y()),F}function Q(){const F={ref:"item",style:e.headerStyle,class:e.headerClass,dark:n.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return b.value===!0&&(F.clickable=!0,F.onClick=T,Object.assign(F,h.value===!0?q.value:A.value)),c(ee,F,N)}function te(){return qt(c("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:l.value,id:v.value},pe(t.default)),[[Qt,a.value]])}function H(){const F=[Q(),c(Tt,{duration:e.duration,onShow:B,onHide:V},te)];return e.expandSeparator===!0&&F.push(c(Ce,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:n.value}),c(Ce,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:n.value})),F}return e.group!==void 0&&R(),xe(()=>{w!==void 0&&w()}),()=>c("div",{class:m.value},[c("div",{class:"q-expansion-item__container relative-position"},H())])}}),lt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},wn=Object.keys(lt);lt.all=!0;function mt(e){const t={};for(const o of wn)e[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?lt:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const kn=["INPUT","TEXTAREA"];function ht(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&kn.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Xe(e,t,o){const u=Ze(e);let n,a=u.left-t.event.x,i=u.top-t.event.y,v=Math.abs(a),k=Math.abs(i);const _=t.direction;_.horizontal===!0&&_.vertical!==!0?n=a<0?"left":"right":_.horizontal!==!0&&_.vertical===!0?n=i<0?"up":"down":_.up===!0&&i<0?(n="up",v>k&&(_.left===!0&&a<0?n="left":_.right===!0&&a>0&&(n="right"))):_.down===!0&&i>0?(n="down",v>k&&(_.left===!0&&a<0?n="left":_.right===!0&&a>0&&(n="right"))):_.left===!0&&a<0?(n="left",v<k&&(_.up===!0&&i<0?n="up":_.down===!0&&i>0&&(n="down"))):_.right===!0&&a>0&&(n="right",v<k&&(_.up===!0&&i<0?n="up":_.down===!0&&i>0&&(n="down")));let s=!1;if(n===void 0&&o===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};n=t.event.lastDir,s=!0,n==="left"||n==="right"?(u.left-=a,v=0,a=0):(u.top-=i,k=0,i=0)}return{synthetic:s,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:u,direction:n,isFirst:t.event.isFirst,isFinal:o===!0,duration:Date.now()-t.event.time,distance:{x:v,y:k},offset:{x:a,y:i},delta:{x:u.left-t.event.lastX,y:u.top-t.event.lastY}}}}let Cn=0;const Ke=Ht({name:"touch-pan",beforeMount(e,{value:t,modifiers:o}){if(o.mouse!==!0&&ve.has.touch!==!0)return;function u(a,i){o.mouse===!0&&i===!0?Te(a):(o.stop===!0&&Se(a),o.prevent===!0&&ot(a))}const n={uid:"qvtp_"+Cn++,handler:t,modifiers:o,direction:mt(o),noop:$t,mouseStart(a){ht(a,n)&&Wt(a)&&(Ee(n,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),n.start(a,!0))},touchStart(a){if(ht(a,n)){const i=a.target;Ee(n,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),n.start(a)}},start(a,i){if(ve.is.firefox===!0&&He(e,!0),n.lastEvt=a,i===!0||o.stop===!0){if(n.direction.all!==!0&&(i!==!0||n.modifiers.mouseAllDir!==!0&&n.modifiers.mousealldir!==!0)){const _=a.type.indexOf("mouse")!==-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&ot(_),a.cancelBubble===!0&&Se(_),Object.assign(_,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[n.uid]:a.qClonedBy.concat(n.uid)}),n.initialEvent={target:a.target,event:_}}Se(a)}const{left:v,top:k}=Ze(a);n.event={x:v,y:k,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:v,lastY:k}},move(a){if(n.event===void 0)return;const i=Ze(a),v=i.left-n.event.x,k=i.top-n.event.y;if(v===0&&k===0)return;n.lastEvt=a;const _=n.event.mouse===!0,s=()=>{u(a,_);let m;o.preserveCursor!==!0&&o.preservecursor!==!0&&(m=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),_===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Yt(),n.styleCleanup=l=>{if(n.styleCleanup=void 0,m!==void 0&&(document.documentElement.style.cursor=m),document.body.classList.remove("non-selectable"),_===!0){const h=()=>{document.body.classList.remove("no-pointer-events--children")};l!==void 0?setTimeout(()=>{h(),l()},50):h()}else l!==void 0&&l()}};if(n.event.detected===!0){n.event.isFirst!==!0&&u(a,n.event.mouse);const{payload:m,synthetic:l}=Xe(a,n,!1);m!==void 0&&(n.handler(m)===!1?n.end(a):(n.styleCleanup===void 0&&n.event.isFirst===!0&&s(),n.event.lastX=m.position.left,n.event.lastY=m.position.top,n.event.lastDir=l===!0?void 0:m.direction,n.event.isFirst=!1));return}if(n.direction.all===!0||_===!0&&(n.modifiers.mouseAllDir===!0||n.modifiers.mousealldir===!0)){s(),n.event.detected=!0,n.move(a);return}const C=Math.abs(v),w=Math.abs(k);C!==w&&(n.direction.horizontal===!0&&C>w||n.direction.vertical===!0&&C<w||n.direction.up===!0&&C<w&&k<0||n.direction.down===!0&&C<w&&k>0||n.direction.left===!0&&C>w&&v<0||n.direction.right===!0&&C>w&&v>0?(n.event.detected=!0,n.move(a)):n.end(a,!0))},end(a,i){if(n.event!==void 0){if($e(n,"temp"),ve.is.firefox===!0&&He(e,!1),i===!0)n.styleCleanup!==void 0&&n.styleCleanup(),n.event.detected!==!0&&n.initialEvent!==void 0&&n.initialEvent.target.dispatchEvent(n.initialEvent.event);else if(n.event.detected===!0){n.event.isFirst===!0&&n.handler(Xe(a===void 0?n.lastEvt:a,n).payload);const{payload:v}=Xe(a===void 0?n.lastEvt:a,n,!0),k=()=>{n.handler(v)};n.styleCleanup!==void 0?n.styleCleanup(k):k()}n.event=void 0,n.initialEvent=void 0,n.lastEvt=void 0}}};if(e.__qtouchpan=n,o.mouse===!0){const a=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";Ee(n,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}ve.has.touch===!0&&Ee(n,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const o=e.__qtouchpan;o!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&o.end(),o.handler=t.value),o.direction=mt(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),$e(t,"main"),$e(t,"temp"),ve.is.firefox===!0&&He(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}}),gt=["B","KB","MB","GB","TB","PB"];function vt(e,t=1){let o=0;for(;parseInt(e,10)>=1024&&o<gt.length-1;)e/=1024,++o;return`${e.toFixed(t)}${gt[o]}`}function we(e,t,o){return o<=t?t:Math.min(o,Math.max(t,e))}const bt=150,Sn=K({name:"QDrawer",inheritAttrs:!1,props:{...Ct,...qe,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...St,"onLayout","miniState"],setup(e,{slots:t,emit:o,attrs:u}){const n=oe(),{proxy:{$q:a}}=n,i=Fe(e,a),{preventBodyScroll:v}=Kt(),{registerTimeout:k,removeTimeout:_}=et(),s=yt(_t,be);if(s===be)return console.error("QDrawer needs to be child of QLayout"),be;let C,w=null,m;const l=z(e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint),h=d(()=>e.mini===!0&&l.value!==!0),q=d(()=>h.value===!0?e.miniWidth:e.width),b=z(e.showIfAbove===!0&&l.value===!1?!0:e.modelValue===!0),r=d(()=>e.persistent!==!0&&(l.value===!0||me.value===!0));function S(f,I){if(E(),f!==!1&&s.animate(),D(0),l.value===!0){const J=s.instances[H.value];J!==void 0&&J.belowBreakpoint===!0&&J.hide(!1),ne(1),s.isContainer.value!==!0&&v(!0)}else ne(0),f!==!1&&je(!1);k(()=>{f!==!1&&je(!0),I!==!0&&o("show",f)},bt)}function j(f,I){P(),f!==!1&&s.animate(),ne(0),D(R.value*q.value),Pe(),I!==!0?k(()=>{o("hide",f)},bt):_()}const{show:A,hide:T}=xt({showing:b,hideOnRouteChange:r,handleShow:S,handleHide:j}),{addToHistory:E,removeFromHistory:P}=Xt(b,T,r),B={belowBreakpoint:l,hide:T},V=d(()=>e.side==="right"),R=d(()=>(a.lang.rtl===!0?-1:1)*(V.value===!0?1:-1)),y=z(0),N=z(!1),Q=z(!1),te=z(q.value*R.value),H=d(()=>V.value===!0?"left":"right"),F=d(()=>b.value===!0&&l.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:q.value:0),W=d(()=>e.overlay===!0||e.miniToOverlay===!0||s.view.value.indexOf(V.value?"R":"L")!==-1||a.platform.is.ios===!0&&s.isContainer.value===!0),G=d(()=>e.overlay===!1&&b.value===!0&&l.value===!1),me=d(()=>e.overlay===!0&&b.value===!0&&l.value===!1),Be=d(()=>"fullscreen q-drawer__backdrop"+(b.value===!1&&N.value===!1?" hidden":"")),Ve=d(()=>({backgroundColor:`rgba(0,0,0,${y.value*.4})`})),ye=d(()=>V.value===!0?s.rows.value.top[2]==="r":s.rows.value.top[0]==="l"),ce=d(()=>V.value===!0?s.rows.value.bottom[2]==="r":s.rows.value.bottom[0]==="l"),Ie=d(()=>{const f={};return s.header.space===!0&&ye.value===!1&&(W.value===!0?f.top=`${s.header.offset}px`:s.header.space===!0&&(f.top=`${s.header.size}px`)),s.footer.space===!0&&ce.value===!1&&(W.value===!0?f.bottom=`${s.footer.offset}px`:s.footer.space===!0&&(f.bottom=`${s.footer.size}px`)),f}),Re=d(()=>{const f={width:`${q.value}px`,transform:`translateX(${te.value}px)`};return l.value===!0?f:Object.assign(f,Ie.value)}),Ae=d(()=>"q-drawer__content fit "+(s.isContainer.value!==!0?"scroll":"overflow-auto")),re=d(()=>`q-drawer q-drawer--${e.side}`+(Q.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(i.value===!0?" q-drawer--dark q-dark":"")+(N.value===!0?" no-transition":b.value===!0?"":" q-layout--prevent-focus")+(l.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${h.value===!0?"mini":"standard"}`+(W.value===!0||G.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(ye.value===!0?" q-drawer--top-padding":""))),p=d(()=>{const f=a.lang.rtl===!0?e.side:H.value;return[[Ke,Dt,void 0,{[f]:!0,mouse:!0}]]}),L=d(()=>{const f=a.lang.rtl===!0?H.value:e.side;return[[Ke,it,void 0,{[f]:!0,mouse:!0}]]}),$=d(()=>{const f=a.lang.rtl===!0?H.value:e.side;return[[Ke,it,void 0,{[f]:!0,mouse:!0,mouseAllDir:!0}]]});function Z(){Ut(l,e.behavior==="mobile"||e.behavior!=="desktop"&&s.totalWidth.value<=e.breakpoint)}O(l,f=>{f===!0?(C=b.value,b.value===!0&&T(!1)):e.overlay===!1&&e.behavior!=="mobile"&&C!==!1&&(b.value===!0?(D(0),ne(0),Pe()):A(!1))}),O(()=>e.side,(f,I)=>{s.instances[I]===B&&(s.instances[I]=void 0,s[I].space=!1,s[I].offset=0),s.instances[f]=B,s[f].size=q.value,s[f].space=G.value,s[f].offset=F.value}),O(s.totalWidth,()=>{(s.isContainer.value===!0||document.qScrollPrevented!==!0)&&Z()}),O(()=>e.behavior+e.breakpoint,Z),O(s.isContainer,f=>{b.value===!0&&v(f!==!0),f===!0&&Z()}),O(s.scrollbarWidth,()=>{D(b.value===!0?0:void 0)}),O(F,f=>{se("offset",f)}),O(G,f=>{o("onLayout",f),se("space",f)}),O(V,()=>{D()}),O(q,f=>{D(),Qe(e.miniToOverlay,f)}),O(()=>e.miniToOverlay,f=>{Qe(f,q.value)}),O(()=>a.lang.rtl,()=>{D()}),O(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Lt(),s.animate())}),O(h,f=>{o("miniState",f)});function D(f){f===void 0?rt(()=>{f=b.value===!0?0:q.value,D(R.value*f)}):(s.isContainer.value===!0&&V.value===!0&&(l.value===!0||Math.abs(f)===q.value)&&(f+=R.value*s.scrollbarWidth.value),te.value=f)}function ne(f){y.value=f}function je(f){const I=f===!0?"remove":s.isContainer.value!==!0?"add":"";I!==""&&document.body.classList[I]("q-body--drawer-toggle")}function Lt(){w!==null&&clearTimeout(w),n.proxy&&n.proxy.$el&&n.proxy.$el.classList.add("q-drawer--mini-animate"),Q.value=!0,w=setTimeout(()=>{w=null,Q.value=!1,n&&n.proxy&&n.proxy.$el&&n.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function Dt(f){if(b.value!==!1)return;const I=q.value,J=we(f.distance.x,0,I);if(f.isFinal===!0){J>=Math.min(75,I)===!0?A():(s.animate(),ne(0),D(R.value*I)),N.value=!1;return}D((a.lang.rtl===!0?V.value!==!0:V.value)?Math.max(I-J,0):Math.min(0,J-I)),ne(we(J/I,0,1)),f.isFirst===!0&&(N.value=!0)}function it(f){if(b.value!==!0)return;const I=q.value,J=f.direction===e.side,ze=(a.lang.rtl===!0?J!==!0:J)?we(f.distance.x,0,I):0;if(f.isFinal===!0){Math.abs(ze)<Math.min(75,I)===!0?(s.animate(),ne(1),D(0)):T(),N.value=!1;return}D(R.value*ze),ne(we(1-ze/I,0,1)),f.isFirst===!0&&(N.value=!0)}function Pe(){v(!1),je(!0)}function se(f,I){s.update(e.side,f,I)}function Ut(f,I){f.value!==I&&(f.value=I)}function Qe(f,I){se("size",f===!0?e.miniWidth:I)}return s.instances[e.side]=B,Qe(e.miniToOverlay,q.value),se("space",G.value),se("offset",F.value),e.showIfAbove===!0&&e.modelValue!==!0&&b.value===!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",!0),Ft(()=>{o("onLayout",G.value),o("miniState",h.value),C=e.showIfAbove===!0;const f=()=>{(b.value===!0?S:j)(!1,!0)};if(s.totalWidth.value!==0){rt(f);return}m=O(s.totalWidth,()=>{m(),m=void 0,b.value===!1&&e.showIfAbove===!0&&l.value===!1?A(!1):f()})}),xe(()=>{m!==void 0&&m(),w!==null&&(clearTimeout(w),w=null),b.value===!0&&Pe(),s.instances[e.side]===B&&(s.instances[e.side]=void 0,se("size",0),se("offset",0),se("space",!1))}),()=>{const f=[];l.value===!0&&(e.noSwipeOpen===!1&&f.push(qt(c("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),p.value)),f.push(st("div",{ref:"backdrop",class:Be.value,style:Ve.value,"aria-hidden":"true",onClick:T},void 0,"backdrop",e.noSwipeBackdrop!==!0&&b.value===!0,()=>$.value)));const I=h.value===!0&&t.mini!==void 0,J=[c("div",{...u,key:""+I,class:[Ae.value,u.class]},I===!0?t.mini():pe(t.default))];return e.elevated===!0&&b.value===!0&&J.push(c("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),f.push(st("aside",{ref:"content",class:re.value,style:Re.value},J,"contentclose",e.noSwipeClose!==!0&&l.value===!0,()=>L.value)),c("div",{class:"q-drawer-container"},f)}}}),Bt={ratio:[String,Number]};function Vt(e,t){return d(()=>{const o=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const xn=1.7778,qn=K({name:"QImg",props:{...Bt,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:xn},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:o}){const u=z(e.initialRatio),n=Vt(e,u),a=oe(),{registerTimeout:i,removeTimeout:v}=et(),{registerTimeout:k,removeTimeout:_}=et(),s=d(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),C=d(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),w=[z(null),z(s.value)],m=z(0),l=z(!1),h=z(!1),q=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),b=d(()=>({width:e.width,height:e.height})),r=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),S=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function j(){if(_(),e.loadingShowDelay===0){l.value=!0;return}k(()=>{l.value=!0},e.loadingShowDelay)}function A(){_(),l.value=!1}function T({target:y}){Ne(a)===!1&&(v(),u.value=y.naturalHeight===0?.5:y.naturalWidth/y.naturalHeight,E(y,1))}function E(y,N){N===1e3||Ne(a)===!0||(y.complete===!0?P(y):i(()=>{E(y,N+1)},50))}function P(y){Ne(a)!==!0&&(m.value=m.value^1,w[m.value].value=null,A(),y.getAttribute("__qerror")!=="true"&&(h.value=!1),o("load",y.currentSrc||y.src))}function B(y){v(),A(),h.value=!0,w[m.value].value=C.value,w[m.value^1].value=s.value,o("error",y)}function V(y){const N=w[y].value,Q={key:"img_"+y,class:r.value,style:S.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...N};return m.value===y?Object.assign(Q,{class:Q.class+"current",onLoad:T,onError:B}):Q.class+="loaded",c("div",{class:"q-img__container absolute-full",key:"img"+y},c("img",Q))}function R(){return l.value===!1?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},pe(t[h.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[c(tt,{color:e.spinnerColor,size:e.spinnerSize})])}{let y=function(){O(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,N=>{v(),h.value=!1,N===null?(A(),w[m.value^1].value=s.value):j(),w[m.value].value=N},{immediate:!0})};Gt.value===!0?Ft(y):y()}return()=>{const y=[];return n.value!==null&&y.push(c("div",{key:"filler",style:n.value})),w[0].value!==null&&y.push(V(0)),w[1].value!==null&&y.push(V(1)),y.push(c(kt,{name:"q-transition--fade"},R)),c("div",{key:"main",class:q.value,style:b.value,role:"img","aria-label":e.alt},y)}}}),Fn=K({name:"QVideo",props:{...Bt,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(e){const t=Vt(e),o=d(()=>"q-video"+(e.ratio!==void 0?" q-video--responsive":""));return()=>c("div",{class:o.value,style:t.value},[c("iframe",{src:e.src,title:e.title,fetchpriority:e.fetchpriority,loading:e.loading,referrerpolicy:e.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}}),Tn=K({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const o=d(()=>e.sent===!0?"sent":"received"),u=d(()=>`q-message-text-content q-message-text-content--${o.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),n=d(()=>`q-message-text q-message-text--${o.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),a=d(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),i=d(()=>e.size!==void 0?`col-${e.size}`:""),v=d(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function k(s){return t.stamp!==void 0?[s,c("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[s,c("div",{class:"q-message-stamp",[v.value.stamp]:e.stamp})]:[s]}function _(s,C){const w=C===!0?s.length>1?m=>m:m=>c("div",[m]):m=>c("div",{[v.value.msg]:m});return s.map((m,l)=>c("div",{key:l,class:n.value},[c("div",{class:u.value},k(w(m)))]))}return()=>{const s=[];t.avatar!==void 0?s.push(t.avatar()):e.avatar!==void 0&&s.push(c("img",{class:`q-message-avatar q-message-avatar--${o.value}`,src:e.avatar,"aria-hidden":"true"}));const C=[];t.name!==void 0?C.push(c("div",{class:`q-message-name q-message-name--${o.value}`},t.name())):e.name!==void 0&&C.push(c("div",{class:`q-message-name q-message-name--${o.value}`,[v.value.name]:e.name})),t.default!==void 0?C.push(_(Jt(t.default()),!0)):e.text!==void 0&&C.push(_(e.text)),s.push(c("div",{class:i.value},C));const w=[];return t.label!==void 0?w.push(c("div",{class:"q-message-label"},t.label())):e.label!==void 0&&w.push(c("div",{class:"q-message-label",[v.value.label]:e.label})),w.push(c("div",{class:a.value},s)),c("div",{class:`q-message q-message-${o.value}`},w)}}}),Bn={...Zt,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},nt=50,It=2*nt,zt=It*Math.PI,Vn=Math.round(zt*1e3)/1e3,In=K({name:"QCircularProgress",props:{...Bn,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=oe(),u=en(e),n=d(()=>{const m=(o.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(o.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-m}deg)`:`rotate3d(0, 0, 1, ${m-90}deg)`}}),a=d(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=d(()=>It/(1-e.thickness/2)),v=d(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),k=d(()=>we(e.value,e.min,e.max)),_=d(()=>e.max-e.min),s=d(()=>e.thickness/2*i.value),C=d(()=>{const m=(e.max-k.value)/_.value,l=e.rounded===!0&&k.value<e.max&&m<.25?s.value/2*(1-m/.25):0;return zt*m+l});function w({thickness:m,offset:l,color:h,cls:q,rounded:b}){return c("circle",{class:"q-circular-progress__"+q+(h!==void 0?` text-${h}`:""),style:a.value,fill:"transparent",stroke:"currentColor","stroke-width":m,"stroke-dasharray":Vn,"stroke-dashoffset":l,"stroke-linecap":b,cx:i.value,cy:i.value,r:nt})}return()=>{const m=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&m.push(c("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:nt-s.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&m.push(w({cls:"track",thickness:s.value,offset:0,color:e.trackColor})),m.push(w({cls:"circle",thickness:s.value,offset:C.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const l=[c("svg",{class:"q-circular-progress__svg",style:n.value,viewBox:v.value,"aria-hidden":"true"},m)];return e.showValue===!0&&l.push(c("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},t.default!==void 0?t.default():[c("div",k.value)])),c("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:u.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:k.value},tn(t.internal,l))}}});function ge(e,t,o,u){const n=[];return e.forEach(a=>{u(a)===!0?n.push(a):t.push({failedPropValidation:o,file:a})}),n}function Oe(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Te(e)}const zn={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},En=["rejected"];function Ln({editable:e,dnd:t,getFileInput:o,addFilesToQueue:u}){const{props:n,emit:a,proxy:i}=oe(),v=z(null),k=d(()=>n.accept!==void 0?n.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),_=d(()=>parseInt(n.maxFiles,10)),s=d(()=>parseInt(n.maxTotalSize,10));function C(r){if(e.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&Se(r);else{const S=o();S&&S!==r.target&&S.click(r)}}function w(r){e.value&&r&&u(null,r)}function m(r,S,j,A){let T=Array.from(S||r.target.files);const E=[],P=()=>{E.length!==0&&a("rejected",E)};if(n.accept!==void 0&&k.value.indexOf("*/")===-1&&(T=ge(T,E,"accept",B=>k.value.some(V=>B.type.toUpperCase().startsWith(V)||B.name.toUpperCase().endsWith(V))),T.length===0))return P();if(n.maxFileSize!==void 0){const B=parseInt(n.maxFileSize,10);if(T=ge(T,E,"max-file-size",V=>V.size<=B),T.length===0)return P()}if(n.multiple!==!0&&T.length!==0&&(T=[T[0]]),T.forEach(B=>{B.__key=B.webkitRelativePath+B.lastModified+B.name+B.size}),A===!0){const B=j.map(V=>V.__key);T=ge(T,E,"duplicate",V=>B.includes(V.__key)===!1)}if(T.length===0)return P();if(n.maxTotalSize!==void 0){let B=A===!0?j.reduce((V,R)=>V+R.size,0):0;if(T=ge(T,E,"max-total-size",V=>(B+=V.size,B<=s.value)),T.length===0)return P()}if(typeof n.filter=="function"){const B=n.filter(T);T=ge(T,E,"filter",V=>B.includes(V))}if(n.maxFiles!==void 0){let B=A===!0?j.length:0;if(T=ge(T,E,"max-files",()=>(B++,B<=_.value)),T.length===0)return P()}if(P(),T.length!==0)return T}function l(r){Oe(r),t.value!==!0&&(t.value=!0)}function h(r){Te(r),(r.relatedTarget!==null||ve.is.safari!==!0?r.relatedTarget!==v.value:document.elementsFromPoint(r.clientX,r.clientY).includes(v.value)===!1)===!0&&(t.value=!1)}function q(r){Oe(r);const S=r.dataTransfer.files;S.length!==0&&u(null,S),t.value=!1}function b(r){if(t.value===!0)return c("div",{ref:v,class:`q-${r}__dnd absolute-full`,onDragenter:Oe,onDragover:Oe,onDragleave:h,onDrop:q})}return Object.assign(i,{pickFiles:C,addFiles:w}),{pickFiles:C,addFiles:w,onDragover:l,onDragleave:h,processFiles:m,getDndNode:b,maxFilesNumber:_,maxTotalSizeNumber:s}}function pt(e){return(e*100).toFixed(2)+"%"}const Dn={...qe,...zn,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},Et=[...En,"start","finish","added","removed"];function Un(e,t){const o=oe(),{props:u,slots:n,emit:a,proxy:i}=o,{$q:v}=i,k=Fe(u,v);function _(p,L,$){if(p.__status=L,L==="idle"){p.__uploaded=0,p.__progress=0,p.__sizeLabel=vt(p.size),p.__progressLabel="0.00%";return}if(L==="failed"){i.$forceUpdate();return}p.__uploaded=L==="uploaded"?p.size:$,p.__progress=L==="uploaded"?1:Math.min(.9999,p.__uploaded/p.size),p.__progressLabel=pt(p.__progress),i.$forceUpdate()}const s=d(()=>u.disable!==!0&&u.readonly!==!0),C=z(!1),w=z(null),m=z(null),l={files:z([]),queuedFiles:z([]),uploadedFiles:z([]),uploadedSize:z(0),updateFileStatus:_,isAlive:()=>Ne(o)===!1},{pickFiles:h,addFiles:q,onDragover:b,onDragleave:r,processFiles:S,getDndNode:j,maxFilesNumber:A,maxTotalSizeNumber:T}=Ln({editable:s,dnd:C,getFileInput:Be,addFilesToQueue:Ve});Object.assign(l,e({props:u,slots:n,emit:a,helpers:l,exposeApi:p=>{Object.assign(l,p)}})),l.isBusy===void 0&&(l.isBusy=z(!1));const E=z(0),P=d(()=>E.value===0?0:l.uploadedSize.value/E.value),B=d(()=>pt(P.value)),V=d(()=>vt(E.value)),R=d(()=>s.value===!0&&l.isUploading.value!==!0&&(u.multiple===!0||l.queuedFiles.value.length===0)&&(u.maxFiles===void 0||l.files.value.length<A.value)&&(u.maxTotalSize===void 0||E.value<T.value)),y=d(()=>s.value===!0&&l.isBusy.value!==!0&&l.isUploading.value!==!0&&l.queuedFiles.value.length!==0);nn(an,Ie);const N=d(()=>"q-uploader column no-wrap"+(k.value===!0?" q-uploader--dark q-dark":"")+(u.bordered===!0?" q-uploader--bordered":"")+(u.square===!0?" q-uploader--square no-border-radius":"")+(u.flat===!0?" q-uploader--flat no-shadow":"")+(u.disable===!0?" disabled q-uploader--disable":"")+(C.value===!0?" q-uploader--dnd":"")),Q=d(()=>"q-uploader__header"+(u.color!==void 0?` bg-${u.color}`:"")+(u.textColor!==void 0?` text-${u.textColor}`:""));O(l.isUploading,(p,L)=>{L===!1&&p===!0?a("start"):L===!0&&p===!1&&a("finish")});function te(){u.disable===!1&&(l.abort(),l.uploadedSize.value=0,E.value=0,me(),l.files.value=[],l.queuedFiles.value=[],l.uploadedFiles.value=[])}function H(){u.disable===!1&&W(["uploaded"],()=>{l.uploadedFiles.value=[]})}function F(){W(["idle","failed"],({size:p})=>{E.value-=p,l.queuedFiles.value=[]})}function W(p,L){if(u.disable===!0)return;const $={files:[],size:0},Z=l.files.value.filter(D=>p.indexOf(D.__status)===-1?!0:($.size+=D.size,$.files.push(D),D.__img!==void 0&&window.URL.revokeObjectURL(D.__img.src),!1));$.files.length!==0&&(l.files.value=Z,L($),a("removed",$.files))}function G(p){u.disable||(p.__status==="uploaded"?l.uploadedFiles.value=l.uploadedFiles.value.filter(L=>L.__key!==p.__key):p.__status==="uploading"?p.__abort():E.value-=p.size,l.files.value=l.files.value.filter(L=>L.__key!==p.__key?!0:(L.__img!==void 0&&window.URL.revokeObjectURL(L.__img.src),!1)),l.queuedFiles.value=l.queuedFiles.value.filter(L=>L.__key!==p.__key),a("removed",[p]))}function me(){l.files.value.forEach(p=>{p.__img!==void 0&&window.URL.revokeObjectURL(p.__img.src)})}function Be(){return m.value||w.value.getElementsByClassName("q-uploader__input")[0]}function Ve(p,L){const $=S(p,L,l.files.value,!0),Z=Be();Z!=null&&(Z.value=""),$!==void 0&&($.forEach(D=>{if(l.updateFileStatus(D,"idle"),E.value+=D.size,u.noThumbnails!==!0&&D.type.toUpperCase().startsWith("IMAGE")){const ne=new Image;ne.src=window.URL.createObjectURL(D),D.__img=ne}}),l.files.value=l.files.value.concat($),l.queuedFiles.value=l.queuedFiles.value.concat($),a("added",$),u.autoUpload===!0&&l.upload())}function ye(){y.value===!0&&l.upload()}function ce(p,L,$){if(p===!0){const Z={type:"a",key:L,icon:v.iconSet.uploader[L],flat:!0,dense:!0};let D;return L==="add"?(Z.onClick=h,D=Ie):Z.onClick=$,c(U,Z,D)}}function Ie(){return c("input",{ref:m,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:u.accept,multiple:u.multiple===!0?"multiple":void 0,capture:u.capture,onMousedown:Se,onClick:h,onChange:Ve})}function Re(){return n.header!==void 0?n.header(re):[c("div",{class:"q-uploader__header-content column"},[c("div",{class:"flex flex-center no-wrap q-gutter-xs"},[ce(l.queuedFiles.value.length!==0,"removeQueue",F),ce(l.uploadedFiles.value.length!==0,"removeUploaded",H),l.isUploading.value===!0?c(tt,{class:"q-uploader__spinner"}):null,c("div",{class:"col column justify-center"},[u.label!==void 0?c("div",{class:"q-uploader__title"},[u.label]):null,c("div",{class:"q-uploader__subtitle"},[V.value+" / "+B.value])]),ce(R.value,"add"),ce(u.hideUploadBtn===!1&&y.value===!0,"upload",l.upload),ce(l.isUploading.value,"clear",l.abort)])])]}function Ae(){return n.list!==void 0?n.list(re):l.files.value.map(p=>c("div",{key:p.__key,class:"q-uploader__file relative-position"+(u.noThumbnails!==!0&&p.__img!==void 0?" q-uploader__file--img":"")+(p.__status==="failed"?" q-uploader__file--failed":p.__status==="uploaded"?" q-uploader__file--uploaded":""),style:u.noThumbnails!==!0&&p.__img!==void 0?{backgroundImage:'url("'+p.__img.src+'")',backgroundSize:u.thumbnailFit}:null},[c("div",{class:"q-uploader__file-header row flex-center no-wrap"},[p.__status==="failed"?c(Je,{class:"q-uploader__file-status",name:v.iconSet.type.negative,color:"negative"}):null,c("div",{class:"q-uploader__file-header-content col"},[c("div",{class:"q-uploader__title"},[p.name]),c("div",{class:"q-uploader__subtitle row items-center no-wrap"},[p.__sizeLabel+" / "+p.__progressLabel])]),p.__status==="uploading"?c(In,{value:p.__progress,min:0,max:1,indeterminate:p.__progress===0}):c(U,{round:!0,dense:!0,flat:!0,icon:v.iconSet.uploader[p.__status==="uploaded"?"done":"clear"],onClick:()=>{G(p)}})])]))}xe(()=>{l.isUploading.value===!0&&l.abort(),l.files.value.length!==0&&me()});const re={};for(const p in l)ln(l[p])===!0?on(re,p,()=>l[p].value):re[p]=l[p];return Object.assign(re,{upload:ye,reset:te,removeUploadedFiles:H,removeQueuedFiles:F,removeFile:G,pickFiles:h,addFiles:q}),rn(re,{canAddFiles:()=>R.value,canUpload:()=>y.value,uploadSizeLabel:()=>V.value,uploadProgressLabel:()=>B.value}),t({...l,upload:ye,reset:te,removeUploadedFiles:H,removeQueuedFiles:F,removeFile:G,pickFiles:h,addFiles:q,canAddFiles:R,canUpload:y,uploadSizeLabel:V,uploadProgressLabel:B}),()=>{const p=[c("div",{class:Q.value},Re()),c("div",{class:"q-uploader__list scroll"},Ae()),j("uploader")];l.isBusy.value===!0&&p.push(c("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[c(tt)]));const L={ref:w,class:N.value};return R.value===!0&&Object.assign(L,{onDragover:b,onDragleave:r}),c("div",L,p)}}const On=()=>!0;function Nn(e){const t={};return e.forEach(o=>{t[o]=On}),t}const Mn=Nn(Et),Rn=({name:e,props:t,emits:o,injectPlugin:u})=>K({name:e,props:{...Dn,...t},emits:sn(o)===!0?{...Mn,...o}:[...Et,...o],setup(n,{expose:a}){return Un(u,a)}});function ie(e){return typeof e=="function"?e:()=>e}const An="QUploader",jn={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Pn=["factoryFailed","uploaded","failed","uploading"];function Qn({props:e,emit:t,helpers:o}){const u=z([]),n=z([]),a=z(0),i=d(()=>({url:ie(e.url),method:ie(e.method),headers:ie(e.headers),formFields:ie(e.formFields),fieldName:ie(e.fieldName),withCredentials:ie(e.withCredentials),sendRaw:ie(e.sendRaw),batch:ie(e.batch)})),v=d(()=>a.value>0),k=d(()=>n.value.length!==0);let _;function s(){u.value.forEach(l=>{l.abort()}),n.value.length!==0&&(_=!0)}function C(){const l=o.queuedFiles.value.slice(0);o.queuedFiles.value=[],i.value.batch(l)?w(l):l.forEach(h=>{w([h])})}function w(l){if(a.value++,typeof e.factory!="function"){m(l,{});return}const h=e.factory(l);if(!h)t("factoryFailed",new Error("QUploader: factory() does not return properly"),l),a.value--;else if(typeof h.catch=="function"&&typeof h.then=="function"){n.value.push(h);const q=b=>{o.isAlive()===!0&&(n.value=n.value.filter(r=>r!==h),n.value.length===0&&(_=!1),o.queuedFiles.value=o.queuedFiles.value.concat(l),l.forEach(r=>{o.updateFileStatus(r,"failed")}),t("factoryFailed",b,l),a.value--)};h.then(b=>{_===!0?q(new Error("Aborted")):o.isAlive()===!0&&(n.value=n.value.filter(r=>r!==h),m(l,b))}).catch(q)}else m(l,h||{})}function m(l,h){const q=new FormData,b=new XMLHttpRequest,r=(y,N)=>h[y]!==void 0?ie(h[y])(N):i.value[y](N),S=r("url",l);if(!S){console.error("q-uploader: invalid or no URL specified"),a.value--;return}const j=r("formFields",l);j!==void 0&&j.forEach(y=>{q.append(y.name,y.value)});let A=0,T=0,E=0,P=0,B;b.upload.addEventListener("progress",y=>{if(B===!0)return;const N=Math.min(P,y.loaded);o.uploadedSize.value+=N-E,E=N;let Q=E-T;for(let te=A;Q>0&&te<l.length;te++){const H=l[te];if(Q>H.size)Q-=H.size,A++,T+=H.size,o.updateFileStatus(H,"uploading",H.size);else{o.updateFileStatus(H,"uploading",Q);return}}},!1),b.onreadystatechange=()=>{b.readyState<4||(b.status&&b.status<400?(o.uploadedFiles.value=o.uploadedFiles.value.concat(l),l.forEach(y=>{o.updateFileStatus(y,"uploaded")}),t("uploaded",{files:l,xhr:b})):(B=!0,o.uploadedSize.value-=E,o.queuedFiles.value=o.queuedFiles.value.concat(l),l.forEach(y=>{o.updateFileStatus(y,"failed")}),t("failed",{files:l,xhr:b})),a.value--,u.value=u.value.filter(y=>y!==b))},b.open(r("method",l),S),r("withCredentials",l)===!0&&(b.withCredentials=!0);const V=r("headers",l);V!==void 0&&V.forEach(y=>{b.setRequestHeader(y.name,y.value)});const R=r("sendRaw",l);l.forEach(y=>{o.updateFileStatus(y,"uploading",0),R!==!0&&q.append(r("fieldName",y),y,y.name),y.xhr=b,y.__abort=()=>{b.abort()},P+=y.size}),t("uploading",{files:l,xhr:b}),u.value.push(b),R===!0?b.send(new Blob(l)):b.send(q)}return{isUploading:v,isBusy:k,abort:s,upload:C}}const Hn={name:An,props:jn,emits:Pn,injectPlugin:Qn},Ge=Rn(Hn);class ke extends Error{}ke.prototype.name="InvalidTokenError";function $n(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,o)=>{let u=o.charCodeAt(0).toString(16).toUpperCase();return u.length<2&&(u="0"+u),"%"+u}))}function Wn(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return $n(t)}catch{return atob(t)}}function Yn(e,t){if(typeof e!="string")throw new ke("Invalid token specified: must be a string");t||(t={});const o=t.header===!0?0:1,u=e.split(".")[o];if(typeof u!="string")throw new ke(`Invalid token specified: missing part #${o+1}`);let n;try{n=Wn(u)}catch(a){throw new ke(`Invalid token specified: invalid base64 for part #${o+1} (${a.message})`)}try{return JSON.parse(n)}catch(a){throw new ke(`Invalid token specified: invalid json for part #${o+1} (${a.message})`)}}const Xn={data(){return{messages:[],ws_action:"send",message:"",message_type:"1",message_isReply:!1,message_Reply:"",name:"",Id:"",avatar_url:"",bio:"",birthday:"",ws:null,isConnected:!1,currentTime:"",leftDrawerOpen_1:!1,newChatroomDialogVisible:!1,expansionVisible:!1,uploadFileDialogVisible_1:!1,uploadFileDialogVisible_2:!1,uploadFileDialogVisible_3:!1,siderVisible:!1,current_chatroom:"",current_chatroom_id:"1",chatrooms:[],showDetails:!1,current_chatroom_owner:"",badges:[],all_badges:[],newChatroomName:"",newChatroomOwner:"",newChatroomModerator:"",expansionX:0,expansionY:0,edit_message_id:"",edit_name_id:"",edit_name:""}},mounted(){const e=localStorage.getItem("token");if(console.log(e),!localStorage.getItem("token")){this.$router.push("/login");return}try{const t=Yn(e);console.log(t),this.name=t.username,this.Id=t.userId,this.avatar_url=t.user_avatar}catch(t){console.error("Invalid token or decoding failed:",t),this.$router.push("/login")}this.connetWebsocket(),this.fetchChatrooms(),this.fetchAccountInfo(),setInterval(this.updateTime,1e3)},methods:{async connetWebsocket(){this.ws=new WebSocket("wss://zhengfu200.serv00.net"),this.ws.onopen=()=>{this.isConnected=!0,console.log("WebSocket connection established")},this.ws.onmessage=e=>{const t=JSON.parse(e.data);if(t.success===!1&&(console.log(t),this.$q.notify({type:"negative",message:t.message,timeout:1e3}),console.log("Error:",t.message)),t.action=="newMessage"){const o=JSON.parse(e.data);this.messages.push(o),this.fetchMessages()}t.action=="messageRevoked"&&(this.$q.notify({type:"positive",message:t.message}),this.fetchMessages())},this.ws.onclose=()=>{this.isConnected=!1,console.log("WebSocket connection closed")},this.ws.onerror=e=>{console.log("WebSocket error:",e)}},async fetchAllChatrooms(){fetch("https://zhengfu200.serv00.net/api/all_chatrooms").then(e=>e.json()).then(e=>{this.chatrooms=e.chatrooms}).catch(e=>{console.error("Error fetching chatrooms:",e)})},async fetchChatrooms(){fetch(`https://zhengfu200.serv00.net/api/chatrooms?chatroom_id=${this.current_chatroom_id}`).then(e=>e.json()).then(e=>{this.current_chatroom_id=e.chatrooms.id,this.current_chatroom=e.chatrooms.name,this.current_chatroom_owner=e.chatrooms.owner,this.fetchMessages()}).catch(e=>{this.$q.notify({color:"negative",message:"聊天室获取错误，请检查网络",icon:"report_problem",position:"top"}),console.error("Error fetching chatrooms:",e)})},async fetchMessages(){fetch(`https://zhengfu200.serv00.net/api/chatroomBadges?chatroom_id=${this.current_chatroom_id}`).then(e=>e.json()).then(e=>{this.all_badges=e.badges,console.log(this.all_badges)}).catch(e=>{console.error("Error fetching chatroom badges:",e)}),fetch(`https://zhengfu200.serv00.net/api/messages?chatroom_id=${this.current_chatroom_id}`).then(e=>e.json()).then(e=>{this.messages=e.messages}).catch(e=>{console.error("Error fetching messages:",e)})},sendMessage(){if(this.isConnected&&this.message&&this.name){const e=new Date().toLocaleTimeString(),t={action:this.ws_action,chatroom:this.current_chatroom,Id:this.Id,name:this.name,avatar:this.avatar_url,message:this.message,currentTime:e,message_type:parseInt(this.message_type,10),message_isReply:this.message_isReply,message_Reply:this.message_Reply};this.ws.send(JSON.stringify(t)),this.message="",this.message_type=1}else this.$q.notify({color:"yellow",message:"服务器连接中断，请刷新再试",icon:"report_problem",position:"top"}),console.log("WebSocket is not connected")},updateTime(){const e=new Date;this.currentTime=e.toLocaleTimeString()},gotoLogin(){this.$router.push("/login")},toggleDrawer(){this.fetchAllChatrooms(),this.leftDrawerOpen_1=!this.leftDrawerOpen_1},switchChatRoom(e){this.current_chatroom_id=e,this.fetchChatrooms()},toggleDetails(){this.showDetails=!this.showDetails},goToServerModerator(){const e=localStorage.getItem("token");if(console.log(this.current_chatroom_id),!e){this.$q.notify({color:"negative",message:"no token found, please try login again",icon:"report_problem",position:"top"});return}fetch("https://zhengfu200.serv00.net/api/verifyChatroomOwner",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({chatroom_id:this.current_chatroom_id})}).then(t=>{if(t.status===401)throw this.$q.notify({color:"negative",message:"Token is required",icon:"error",position:"top"}),new Error("Token is required");if(t.status===402)throw this.$q.notify({color:"negative",message:"Token is invalid,please try to login again!",icon:"error",position:"top"}),new Error("Token is invalid");return t.json()}).then(t=>{t.isOwner?this.$router.push({name:"server-moderator",query:{chatroom_id:this.current_chatroom_id,chatroom:this.current_chatroom,owner:this.current_chatroom_owner}}):this.$q.notify({color:"negative",message:"You are not the owner of this chatroom!",icon:"report_problem",position:"top"})}).catch(t=>{this.$q.notify({color:"negative",message:"An error occurred:",error:t,icon:"error",position:"top"})})},getBadgeColor(e){return e=="owner"?"red":e=="moderator"?"blue":e=="developer"?"purple":"green"},CreateChatroom(){this.newChatroomName.trim()?(console.log("创建聊天室: ",this.newChatroomName),this.newChatroomDialogVisible=!1,fetch("https://zhengfu200.serv00.net/api/CreateChatRoom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Id:this.Id,name:this.name,NewChatroomName:this.newChatroomName})}).then(e=>{if(!e.ok)return e.json().then(t=>{throw new Error(t.error)})}).then(e=>{console.log("聊天室创建成功:",e),this.$q.notify({type:"positive",message:"聊天室创建成功",position:"top"}),this.newChatroomDialogVisible=!1,this.fetchChatrooms(),window.location.reload()}).catch(e=>{this.$q.notify({type:"negative",message:e.message,position:"top"})})):this.$q.notify({type:"negative",message:"聊天室名称不能为空",position:"top"})},fetchAccountInfo(){const e=`https://zhengfu200.serv00.net/api/accountInfo?id=${this.Id}`;fetch(e).then(t=>t.ok?t.json():Promise.reject("请求失败，状态码："+t.status)).then(t=>{console.log("用户信息:",t),this.bio=t.bio,this.birthday=t.birthday}).catch(t=>{console.error("请求失败，网络错误:",t),this.$q.notify({type:"negative",message:"请求失败，网络错误："+t,position:"top",timeout:3e3})})},gotoAccountInfo(){this.$router.push({path:"/AccountInfo",query:{id:this.Id}})},gotoUserInfo(e){this.$router.push({path:"/AccountInfo",query:{id:e}})},editType(){this.expansionVisible=!this.expansionVisible},editTypeText(){this.message_type="1",this.expansionVisible=!this.expansionVisible},editTypePhoto(){this.uploadFileDialogVisible_1=!this.uploadFileDialogVisible_1,this.message_type="2",this.expansionVisible=!this.expansionVisible},editTypeVideo(){this.uploadFileDialogVisible_2=!this.uploadFileDialogVisible_2,this.message_type="3",this.expansionVisible=!this.expansionVisible},editTypeWeb(){this.message_type="4",this.expansionVisible=!this.expansionVisible},editTypeFile(){this.uploadFileDialogVisible_3=!this.uploadFileDialogVisible_3,this.message_type="5",this.expansionVisible=!this.expansionVisible},openSourceInNewTab(e){window.open(e,"_blank")},handleUploadSuccess({xhr:e}){const o=JSON.parse(e.responseText).filename;this.message="https://zhengfu200.serv00.net/file/"+o,this.sendMessage(),console.log(this.message),this.$q.notify({message:"上传成功",color:"positive",icon:"check"}),this.message_type==2&&(this.uploadFileDialogVisible_1=!this.uploadFileDialogVisible_1),this.message_type==3&&(this.uploadFileDialogVisible_2=!this.uploadFileDialogVisible_2),this.message_type==5&&(this.uploadFileDialogVisible_3=!this.uploadFileDialogVisible_3)},handleUploadError(e){this.$q.notify({message:"文件上传失败",color:"negative",icon:"error"}),console.error("文件上传失败:",e)},downloadFile(e){console.log(e);const t=document.createElement("a");t.href=e,t.download=e.split("/").pop(),t.click()},openSider(){console.log("siderVisible",this.siderVisible),this.siderVisible=!this.siderVisible},clickMessage(e,t,o,u){this.expansionX=e.clientX,this.expansionY=e.clientY,this.edit_message_id=t,this.edit_name_id=o,this.edit_name=u,this.siderVisible=!this.siderVisible},replyMessage(e){this.message_isReply=!0,this.message_Reply="回复"+e+":",this.siderVisible=!this.siderVisible},cancelReply(){this.message_isReply=!1,this.message_Reply="",this.expansionVisible=!this.expansionVisible},recallMessage(e,t){this.ws_action="recall";const o=localStorage.getItem("token");if(this.isConnected){const u={action:this.ws_action,chatroom:this.current_chatroom,Id:this.Id,message_id:e,name_id:t,token:o};this.ws.send(JSON.stringify(u))}else this.$q.notify({color:"yellow",message:"服务器连接中断，请刷新再试",icon:"report_problem",position:"top"}),console.log("WebSocket is not connected");this.ws_action="send",this.edit_message_id="",this.edit_name_id="",this.edit_name="",this.siderVisible=!this.siderVisible},closeSider(){this.siderVisible=!this.siderVisible}}},Kn={class:"col text-center text-weight-bold"},Gn={key:0},Jn={key:1},Zn=["src"],ea={style:{"margin-top":"10px"}},ta={key:0},na={key:1},aa={key:0},la={key:1},ia={class:"chat-container"},oa={key:0},ra=["innerHTML"],sa={key:1},ua=["href"],da={key:5},ca={class:"chat-input-container"};function fa(e,t,o,u,n,a){return M(),ue(dn,{padding:"",style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(bn,{elevated:""},{default:x(()=>[g(cn,{class:"bg-primary"},{default:x(()=>[g(U,{dense:"",flat:"",icon:"chat"}),t[15]||(t[15]=Y("div",{class:"text-weight-bold"}," ZChat ",-1)),g(U,{dense:"",flat:"",icon:"menu",onClick:a.toggleDrawer},null,8,["onClick"]),Y("div",Kn,ae(n.current_chatroom),1),g(vn),g(U,{dense:"",flat:"",icon:"edit",onClick:a.goToServerModerator},null,8,["onClick"]),g(U,{dense:"",flat:"",icon:"info",onClick:a.toggleDetails},null,8,["onClick"]),g(U,{dense:"",flat:"",icon:"login",class:"gt-xs",onClick:a.gotoLogin},null,8,["onClick"]),Y("div",null,ae(n.currentTime),1)]),_:1})]),_:1}),g(_e,{modelValue:n.showDetails,"onUpdate:modelValue":t[1]||(t[1]=i=>n.showDetails=i)},{default:x(()=>[g(Le,null,{default:x(()=>[g(he,null,{default:x(()=>[t[17]||(t[17]=Y("div",{class:"text-h6"},"Chatroom Details",-1)),n.current_chatroom?(M(),X("div",Gn,[Y("p",null,[g(We,{rounded:"",color:"blue"}),de(" Chatroom Name: "+ae(n.current_chatroom),1)]),Y("p",null,[g(We,{rounded:"",color:"red"}),de(" Owner: "+ae(n.current_chatroom_owner),1)])])):(M(),X("div",Jn,t[16]||(t[16]=[Y("p",null,"No chatroom selected.",-1)])))]),_:1}),g(ut,null,{default:x(()=>[g(U,{flat:"",label:"Close",onClick:t[0]||(t[0]=i=>n.showDetails=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),g(Sn,{modelValue:n.leftDrawerOpen_1,"onUpdate:modelValue":t[3]||(t[3]=i=>n.leftDrawerOpen_1=i),side:"left",style:{width:"25vw"},bordered:""},{default:x(()=>[g(Le,null,{default:x(()=>[g(he,{class:"avatar-section text-center"},{default:x(()=>[g(fn,null,{default:x(()=>[Y("img",{src:n.avatar_url?n.avatar_url:"https://img.icons8.com/?size=100&id=YXG86oegZMMh&format=png&color=000000"},null,8,Zn)]),_:1}),Y("div",ea,"🖖 Name : "+ae(n.name),1),Y("div",null,[n.bio===null?(M(),X("span",ta,"🥰 Bio : 未设置")):(M(),X("span",na,"🥰 Bio : "+ae(n.bio),1))]),Y("div",null,[n.bio===null?(M(),X("span",aa,"🥳 Birthday : 未设置")):(M(),X("span",la,"🥳 Birthday : "+ae(n.birthday),1))])]),_:1})]),_:1}),g(Ce,{inset:""}),g(he,null,{default:x(()=>[g(ft,{"expand-separator":"",icon:"chat",label:"Chatrooms  ",caption:"点击展开聊天室"},{default:x(()=>[g(Ye,{separator:"",bordened:""},{default:x(()=>[g(Ce),(M(!0),X(Ue,null,De(n.chatrooms,i=>(M(),ue(ee,{key:i.id,clickable:"",onClick:v=>a.switchChatRoom(i.id)},{default:x(()=>[g(Me,{class:gn(i.id===n.current_chatroom_id?"text-primary":"")},{default:x(()=>[de(ae(i.name),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),g(Ce,{inset:""}),g(he,null,{default:x(()=>[g(U,{flat:"",class:"full-width no-border",onClick:t[2]||(t[2]=i=>n.newChatroomDialogVisible=!0)},{default:x(()=>t[18]||(t[18]=[de("💬 新建聊天室")])),_:1}),g(U,{flat:"",class:"full-width no-border",onClick:a.gotoAccountInfo},{default:x(()=>t[19]||(t[19]=[de("👋 个人资料")])),_:1},8,["onClick"]),g(U,{flat:"",class:"full-width no-border",onClick:a.gotoLogin},{default:x(()=>t[20]||(t[20]=[de("👉 登录")])),_:1},8,["onClick"]),g(U,{flat:"",class:"full-width no-border",onClick:a.toggleDrawer},{default:x(()=>t[21]||(t[21]=[de("⬅️ 关闭")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"]),g(_e,{modelValue:n.newChatroomDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=i=>n.newChatroomDialogVisible=i),persistent:""},{default:x(()=>[g(Le,{style:{width:"400px"}},{default:x(()=>[g(he,null,{default:x(()=>t[22]||(t[22]=[Y("div",{class:"text-h6"},"💬 新建聊天室",-1)])),_:1}),g(he,null,{default:x(()=>[g(dt,{modelValue:n.newChatroomName,"onUpdate:modelValue":t[4]||(t[4]=i=>n.newChatroomName=i),label:"Chatroom Name",filled:""},null,8,["modelValue"])]),_:1}),g(ut,{align:"right"},{default:x(()=>[g(U,{flat:"",label:"取消",color:"negative",onClick:t[5]||(t[5]=i=>n.newChatroomDialogVisible=!1)}),g(U,{flat:"",label:"确认",color:"primary",onClick:a.CreateChatroom},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),Y("div",ia,[(M(!0),X(Ue,null,De(n.messages,i=>(M(),ue(Tn,{key:i.name,sent:i.name===n.name,name:null,"name-html":"",avatar:i.avatar_url?i.avatar_url:"https://img.icons8.com/?size=100&id=YXG86oegZMMh&format=png&color=000000",stamp:i.date,onClick:v=>a.clickMessage(v,i.id,i.name_id,i.name)},{name:x(()=>[(M(!0),X(Ue,null,De(n.all_badges,(v,k)=>(M(),X("div",{key:k,style:{display:"flex",gap:"3px","flex-wrap":"wrap"}},[(M(!0),X(Ue,null,De(v,(_,s)=>(M(),X("div",{key:_},[i.badges&&i.badges.includes(s)?(M(),ue(We,{key:0,label:s,color:a.getBadgeColor(s)},null,8,["label","color"])):le("",!0)]))),128))]))),128)),Y("span",{innerHTML:`<span>${i.name}</span>`},null,8,ra)]),default:x(()=>[i.isReply==1?(M(),X("div",oa,ae(i.reply),1)):le("",!0),i.type==1?(M(),X("span",sa,ae(i.message),1)):le("",!0),i.type==2&&i.message.startsWith("http")?(M(),ue(qn,{key:2,src:i.message,onClick:v=>a.openSourceInNewTab(i.message)},null,8,["src","onClick"])):le("",!0),i.type==3&&i.message.startsWith("http")?(M(),ue(Fn,{key:3,src:i.message,onClick:v=>a.openSourceInNewTab(i.message),autoplay:!1},null,8,["src","onClick"])):le("",!0),i.type==4?(M(),X("a",{key:4,href:i.message.startsWith("http")?i.message:"http://"+i.message,target:"_blank"},"🔗 "+ae(i.message),9,ua)):le("",!0),i.type==5?(M(),X("div",da,[t[24]||(t[24]=Y("span",null,"📁 文件",-1)),g(U,{color:"primary",rounded:"",style:{"margin-left":"5px"},"text-color":"white",onClick:v=>a.downloadFile(i.message)},{default:x(()=>t[23]||(t[23]=[de(" 直链下载 ")])),_:2},1032,["onClick"])])):le("",!0)]),_:2},1032,["sent","avatar","stamp","onClick"]))),128))]),g(Tt,null,{default:x(()=>[n.siderVisible?(M(),ue(Le,{key:0,style:mn({position:"fixed",left:n.expansionX+"px",top:n.expansionY+"px",zIndex:999})},{default:x(()=>[g(Ye,{bordened:"",vertical:""},{default:x(()=>[g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"🔎 查看个人资料",onClick:t[7]||(t[7]=i=>a.gotoUserInfo(this.edit_name_id))})]),_:1}),g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"🗣️ 回复TA",onClick:t[8]||(t[8]=i=>a.replyMessage(this.edit_name))})]),_:1}),g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"👉 撤回消息",onClick:t[9]||(t[9]=i=>a.recallMessage(this.edit_message_id,this.edit_name_id))})]),_:1}),g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"❌ 关闭",onClick:a.closeSider},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["style"])):le("",!0)]),_:1}),Y("div",ca,[g(dt,{modelValue:n.message,"onUpdate:modelValue":t[11]||(t[11]=i=>n.message=i),label:n.message_isReply==1?n.message_Reply:"消息",class:"bottom-input",onKeyup:hn(a.sendMessage,["enter"]),placeholder:n.message_type==4?"请输入网页链接":"请输入内容"},{default:x(()=>[g(ft,{modelValue:n.expansionVisible,"onUpdate:modelValue":t[10]||(t[10]=i=>n.expansionVisible=i),style:{position:"absolute",bottom:"5px",right:"10px"}},{default:x(()=>[g(Ye,{bordened:"",vertical:""},{default:x(()=>[n.message_isReply==1?(M(),ue(ee,{key:0,style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"❌ 取消回复",onClick:a.cancelReply},null,8,["onClick"])]),_:1})):le("",!0),g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"📝 文字",onClick:a.editTypeText},null,8,["onClick"])]),_:1}),g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"📷 图片",onClick:a.editTypePhoto},null,8,["onClick"])]),_:1}),g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"📹 视频",onClick:a.editTypeVideo},null,8,["onClick"])]),_:1}),g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"🔗 链接",onClick:a.editTypeWeb},null,8,["onClick"])]),_:1}),g(ee,{style:{"background-color":"#ECF0F1"}},{default:x(()=>[g(U,{flat:"",label:"📁 文件",onClick:a.editTypeFile},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","label","onKeyup","placeholder"]),g(U,{round:"",icon:"navigation",class:"send-btn q-btn-shadow",onClick:a.sendMessage,style:{"background-color":"#ECF0F1"}},null,8,["onClick"]),g(U,{round:"",icon:"add",class:"send-btn q-btn-shadow",onClick:a.editType,style:{"background-color":"#ECF0F1"}},null,8,["onClick"])]),g(_e,{modelValue:n.uploadFileDialogVisible_1,"onUpdate:modelValue":t[12]||(t[12]=i=>n.uploadFileDialogVisible_1=i)},{default:x(()=>[g(Ge,{url:"https://zhengfu200.serv00.net/api/upload",style:{"max-width":"300px"},accept:"image/*",onUploaded:a.handleUploadSuccess,onUploadError:a.handleUploadError,"field-name":"file",label:"📷 Upload Images"},null,8,["onUploaded","onUploadError"])]),_:1},8,["modelValue"]),g(_e,{modelValue:n.uploadFileDialogVisible_2,"onUpdate:modelValue":t[13]||(t[13]=i=>n.uploadFileDialogVisible_2=i)},{default:x(()=>[g(Ge,{url:"https://zhengfu200.serv00.net/api/upload",style:{"max-width":"300px"},accept:"video/*",onUploaded:a.handleUploadSuccess,onUploadError:a.handleUploadError,"field-name":"file",label:"📹 Upload Videos"},null,8,["onUploaded","onUploadError"])]),_:1},8,["modelValue"]),g(_e,{modelValue:n.uploadFileDialogVisible_3,"onUpdate:modelValue":t[14]||(t[14]=i=>n.uploadFileDialogVisible_3=i)},{default:x(()=>[g(Ge,{url:"https://zhengfu200.serv00.net/api/upload",style:{"max-width":"300px"},onUploaded:a.handleUploadSuccess,onUploadError:a.handleUploadError,"field-name":"file",label:"📁 Upload Files"},null,8,["onUploaded","onUploadError"])]),_:1},8,["modelValue"])]),_:1})}const ga=un(Xn,[["render",fa]]);export{ga as default};
